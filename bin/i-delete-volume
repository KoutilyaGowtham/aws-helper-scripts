#!/bin/bash
# Unmount, Detach and Delete an EBS Volume

source $(dirname $0)/../inc/ec2-include

if [ ! $1 ]; then
  echo "Usage: $(basename $0) MOUNT_POINT"
  echo
  echo "      MOUNT_POINT - The mount location of the volume that you wish to delete. (E.g. /ebs)"
  echo
  exit
fi

source i-detach-volume $1

if [ ! $? = 0 ]; then
  echo
  echo "Error: Experienced problems while unmounting '$DEVICE'"
  echo
  exit 1
fi

echo "Deleting EBS Volume..."
ec2-delete-volume $VOLUME_ID
echo
